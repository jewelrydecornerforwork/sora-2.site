# ğŸ”´ é—®é¢˜è¯Šæ–­ç»“æœ

## å½“å‰é—®é¢˜

ä½ é‡åˆ°çš„ **"Video generation failed: Failed to fetch"** çº¢å­—é”™è¯¯æ˜¯ç”±ä»¥ä¸‹åŸå› é€ æˆçš„ï¼š

---

## âœ… å·²è¯Šæ–­çš„é—®é¢˜

### 1. **æœåŠ¡å™¨æœªè¿è¡Œ** âš ï¸ è¿™æ˜¯ä¸»è¦é—®é¢˜ï¼
```
çŠ¶æ€: æœåŠ¡å™¨åœ¨ localhost:3000 å’Œ localhost:3001 éƒ½æ²¡æœ‰å“åº”
```

**è§£å†³æ–¹æ³•:**
```bash
# åœ¨é¡¹ç›®ç›®å½•è¿è¡Œ
npm run dev
```

### 2. **æ²¡æœ‰é…ç½®ä»»ä½•APIå¯†é’¥**
```
çŠ¶æ€: .env.local æ–‡ä»¶å­˜åœ¨ï¼Œä½†æ‰€æœ‰ API å¯†é’¥éƒ½è¢«æ³¨é‡Šæˆ–æœªé…ç½®
```

è¿™æœ¬èº«ä¸æ˜¯é—®é¢˜ï¼Œå› ä¸ºç³»ç»Ÿåº”è¯¥è‡ªåŠ¨è¿›å…¥ Demo æ¨¡å¼ã€‚ä½†ç”±äºæœåŠ¡å™¨æ²¡è¿è¡Œï¼Œæ‰€ä»¥å‰ç«¯æ— æ³•è¿æ¥åˆ°åç«¯APIã€‚

---

## ğŸ”§ ç«‹å³ä¿®å¤æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
cd /mnt/c/Users/SJM/Desktop/JEW/sora-2.site

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š
```
â–² Next.js 14.x.x
- Local:        http://localhost:3000
- Network:      http://192.168.x.x:3000

âœ“ Ready in 2.3s
```

### ç¬¬äºŒæ­¥ï¼šåœ¨æµè§ˆå™¨è®¿é—®

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
- `http://localhost:3000` (æˆ–ç»ˆç«¯æ˜¾ç¤ºçš„ç«¯å£)

### ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•åŠŸèƒ½

1. **æµ‹è¯• Text-to-Video:**
   - ç‚¹å‡» "Text to Video" æ ‡ç­¾
   - è¾“å…¥æè¿°ï¼š`A cute cat playing in the garden`
   - ç‚¹å‡» "Generate Video"
   - åº”è¯¥æ˜¾ç¤º Demo æ¨¡å¼æç¤º

2. **æµ‹è¯• Image-to-Video:**
   - ç‚¹å‡» "Image to Video" æ ‡ç­¾
   - ä¸Šä¼ ä¸€å¼ å›¾ç‰‡
   - è¾“å…¥åŠ¨ä½œæè¿°ï¼š`Camera slowly zooms in`
   - ç‚¹å‡» "Generate Video"
   - åº”è¯¥æ˜¾ç¤º Demo æ¨¡å¼æç¤º

---

## ğŸ“‹ é…ç½®çœŸå®APIï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³ä½¿ç”¨çœŸå®çš„AIç”ŸæˆåŠŸèƒ½ï¼Œè€Œä¸æ˜¯Demoæ¨¡å¼ï¼š

### é€‰é¡¹1ï¼šHugging Face (å…è´¹ï¼Œæ¨èæµ‹è¯•ç”¨)

**åªæ”¯æŒ Image-to-Video**

1. æ³¨å†Œè´¦å·: https://huggingface.co/join
2. è·å–Token: https://huggingface.co/settings/tokens
3. ç¼–è¾‘ `.env.local`:
   ```bash
   # å–æ¶ˆæ³¨é‡Šå¹¶æ›¿æ¢ä¸ºä½ çš„token
   HF_API_TOKEN=hf_ä½ çš„å®é™…token
   ```
4. é‡å¯æœåŠ¡å™¨ (Ctrl+C ç„¶å `npm run dev`)

### é€‰é¡¹2ï¼šKie.ai (ä»˜è´¹ï¼ŒåŠŸèƒ½æœ€å…¨)

**æ”¯æŒ Text-to-Video å’Œ Image-to-Video**

1. æ³¨å†Œ: https://kie.ai
2. è·å–APIå¯†é’¥
3. ç¼–è¾‘ `.env.local`:
   ```bash
   # å–æ¶ˆæ³¨é‡Šå¹¶æ›¿æ¢
   KIE_API_KEY=kie_ä½ çš„å®é™…å¯†é’¥
   ```
4. é‡å¯æœåŠ¡å™¨

### é€‰é¡¹3ï¼šReplicate (æŒ‰ä½¿ç”¨ä»˜è´¹)

**åªæ”¯æŒ Image-to-Video**

1. æ³¨å†Œ: https://replicate.com
2. è·å–Token: https://replicate.com/account/api-tokens
3. ç¼–è¾‘ `.env.local`:
   ```bash
   REPLICATE_API_TOKEN=r8_ä½ çš„å®é™…token
   ```
4. é‡å¯æœåŠ¡å™¨

---

## ğŸ¯ é¢„æœŸè¡Œä¸º

### Demo æ¨¡å¼ï¼ˆæ— APIå¯†é’¥ï¼‰
- âœ… è¯·æ±‚æˆåŠŸï¼Œä½†ä½¿ç”¨æ¼”ç¤ºè§†é¢‘
- âš ï¸  é»„è‰²æç¤ºï¼šæ˜¾ç¤º "Demo mode: Please configure at least one API key..."
- ğŸ¬ æ’­æ”¾ `/demo-video.mp4`ï¼ˆå¦‚æœæ–‡ä»¶å­˜åœ¨ï¼‰

### çœŸå®APIæ¨¡å¼ï¼ˆå·²é…ç½®APIå¯†é’¥ï¼‰
- âœ… è¯·æ±‚æˆåŠŸï¼Œç”ŸæˆçœŸå®è§†é¢‘
- âœ… ç»¿è‰²æç¤ºï¼š"Video generated successfully!"
- ğŸ¬ æ’­æ”¾å®é™…ç”Ÿæˆçš„è§†é¢‘URL

---

## ğŸ› å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨

### æ£€æŸ¥1ï¼šç¡®è®¤æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
```bash
curl http://localhost:3000
# åº”è¯¥è¿”å›HTMLå†…å®¹ï¼Œä¸æ˜¯ "Connection refused"
```

### æ£€æŸ¥2ï¼šæŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
åœ¨è¿è¡Œ `npm run dev` çš„ç»ˆç«¯çª—å£ä¸­æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### æ£€æŸ¥3ï¼šæµè§ˆå™¨æ§åˆ¶å°
1. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. åˆ‡æ¢åˆ° "Console" æ ‡ç­¾
3. ç‚¹å‡» "Generate Video"
4. æŸ¥çœ‹æ˜¯å¦æœ‰çº¢è‰²é”™è¯¯ä¿¡æ¯

### æ£€æŸ¥4ï¼šç½‘ç»œæ ‡ç­¾
1. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
2. åˆ‡æ¢åˆ° "Network" æ ‡ç­¾
3. ç‚¹å‡» "Generate Video"
4. æŸ¥æ‰¾ `/api/generate-video` è¯·æ±‚
5. æŸ¥çœ‹çŠ¶æ€ç å’Œå“åº”

---

## ğŸ“Š å·²å®Œæˆçš„ä¿®å¤

æˆ‘å·²ç»ä¸ºä½ å®Œæˆäº†ä»¥ä¸‹ä¿®å¤ï¼š

1. âœ… **æ›´æ–°äº† .env.local**
   - æ·»åŠ äº†è¯¦ç»†çš„APIé…ç½®è¯´æ˜
   - åˆ—å‡ºäº†æ‰€æœ‰å¯ç”¨çš„APIé€‰é¡¹

2. âœ… **æ”¹è¿›äº†åç«¯é”™è¯¯å¤„ç†** (app/api/generate-video/route.ts)
   - æ·»åŠ äº†æ›´è¯¦ç»†çš„æ—¥å¿—
   - æ”¹è¿›äº†Demoæ¨¡å¼çš„æ¶ˆæ¯

3. âœ… **æ”¹è¿›äº†å‰ç«¯é”™è¯¯å¤„ç†** (components/VideoGenerator.tsx)
   - æ·»åŠ äº† "Failed to fetch" çš„ç‰¹æ®Šå¤„ç†
   - æä¾›æ›´å‹å¥½çš„é”™è¯¯æç¤º
   - æ·»åŠ äº†æ§åˆ¶å°é”™è¯¯æ—¥å¿—

4. âœ… **åˆ›å»ºäº†è¯Šæ–­å·¥å…·**
   - API_SETUP_GUIDE.md - å®Œæ•´çš„è®¾ç½®æŒ‡å—
   - diagnose.sh - è‡ªåŠ¨è¯Šæ–­è„šæœ¬
   - DIAGNOSTIC_RESULT.md - è¿™ä¸ªæ–‡ä»¶

---

## ğŸš€ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# å¯åŠ¨æœåŠ¡å™¨
npm run dev

# æ£€æŸ¥ç¯å¢ƒå˜é‡
cat .env.local

# æµ‹è¯•APIç«¯ç‚¹
curl -X POST http://localhost:3000/api/generate-video \
  -F "mode=text" \
  -F "textPrompt=A cute cat" \
  -F "model=google-veo3" \
  -F "resolution=standard" \
  -F "videoRatio=16:9" \
  -F "duration=5"

# æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
# (åœ¨è¿è¡Œ npm run dev çš„ç»ˆç«¯ä¸­æŸ¥çœ‹)
```

---

## ğŸ“ éœ€è¦æ›´å¤šå¸®åŠ©ï¼Ÿ

å¦‚æœä½ æŒ‰ç…§ä¸Šè¿°æ­¥éª¤æ“ä½œåä»ç„¶é‡åˆ°é—®é¢˜ï¼š

1. ç¡®ä¿ä½ åœ¨æ­£ç¡®çš„ç›®å½•
2. ç¡®ä¿ Node.js ç‰ˆæœ¬ >= 18.17.0
3. å°è¯•æ¸…é™¤ç¼“å­˜å¹¶é‡æ–°å®‰è£…ï¼š
   ```bash
   rm -rf .next node_modules
   npm install
   npm run dev
   ```

---

**æœ€åæ›´æ–°:** 2025-01-29
**é—®é¢˜çŠ¶æ€:** å·²è¯†åˆ« - æœåŠ¡å™¨æœªè¿è¡Œ
**ä¸‹ä¸€æ­¥:** è¿è¡Œ `npm run dev` å¯åŠ¨æœåŠ¡å™¨
